<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../images/favicon.ico">

    <title>CatchUp - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<!-- Vendors Style-->
	
	<link rel="stylesheet" href="css/vendors_css.css">
	  
	<!-- Style-->  
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/skin_color.css">
     
  </head>

<body class="hold-transition light-skin sidebar-mini theme-primary fixed">
	
<div class="wrapper">
	<div id="loader"></div>
	
  <header class="main-header">
	<div class="d-flex align-items-center logo-box justify-content-start">
		<a href="#" class="waves-effect waves-light nav-link d-none d-md-inline-block mx-10 push-btn bg-transparent" data-toggle="push-menu" role="button">
			<i class="fas fa-align-left"></i>

		</a>	
		<!-- Logo -->
		<a href="primary.html" class="logo">
		  <!-- logo-->
		  <div class="logo-lg">
			  <span class="light-logo"><img src="../images/logo-dark-text.png" alt="logo"></span>
			  <span class="dark-logo"><img src="../images/logo-light-text.png" alt="logo"></span>
		  </div>
		</a>	
	</div>  
    <!-- Header Navbar -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
	  <div class="app-menu">
		<ul class="header-megamenu nav">
			<li class="btn-group nav-item d-md-none">
				<a href="#" class="waves-effect waves-light nav-link push-btn" data-toggle="push-menu" role="button">
					<i class="fas fa-align-left"></i>

			    </a>
			</li>
		
		</ul> 
	  </div>
		
      <div class="navbar-custom-menu r-side">
        <ul class="nav navbar-nav">	
		
		  
	      <!-- User Account-->
          <li class="dropdown user user-menu">
            <a href="#" class="waves-effect waves-light dropdown-toggle" data-bs-toggle="dropdown" title="User">
				<i class="fas fa-user"></i>
            </a>
            <ul class="dropdown-menu animated flipInX">
<li class="user-body">
    <a class="dropdown-item" href="extra_profile.html"><i class="fa fa-user text-muted me-2"></i> Profile</a>

    <div class="dropdown-divider"></div>
	<a class="dropdown-item" href="#" id="logout-button">
		<i class="fa fa-lock text-muted me-2"></i> Logout
	  </a>
</li>

            </ul>
          </li>	
		  
        
			
        </ul>
      </div>
    </nav>
  </header>
  
  <aside class="main-sidebar">
    <!-- sidebar-->
    <section class="sidebar position-relative">	
	  	<div class="multinav">
		  <div class="multinav-scroll" style="height: 100%;">	
			  <!-- sidebar menu-->
			  <ul class="sidebar-menu" data-widget="tree">	
				<li class="header">Dashboard & Apps</li>
				<li class="treeview">
				
					<li><a href="primary.html"><i class="fas fa-code-branch"></i>Dashboard 1</a></li>
				</li>
				<li><a href="allcourses.html"><i class="fas fa-book-open"></i> Courses</a></li>
				<li><a href="quiz.html"><i class="fas fa-question-circle"></i> Quiz</a></li>
				<li><a href="community.html"><i class="fas fa-users"></i> Community</a></li>

			  </ul>
		  </div>
		</div>
    </section>
	
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
	  <div class="container-full">
		<!-- Main content -->
		<section class="content">
			<div class="row">
				<div class="col-xl-8 col-12">
					<div class="box bg-primary-light">
						<div class="box-body d-flex px-0">
							<div class="flex-grow-1 p-30 flex-grow-1 bg-img dask-bg bg-none-md" style="background-position: right bottom; background-size: auto 100%; background-image: url(../images/svg-icon/color-svg/custom-1.svg)">
								<div class="row">
									<div class="col-12 col-xl-7">
										<h2>Welcome back, <strong id="studentName"></strong>!</h2>

<p class="text-dark my-10 fs-16">
    Your students completed <strong id="studentProgress"></strong> of the tasks.
</p>
<p class="text-dark my-10 fs-16">
    Progress is <strong id="progressStatus">very good!</strong>
</p>

									</div>
									<div class="col-12 col-xl-5"></div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-12 col-xl-6">
							<div class="box">
								<div class="box-header with-border">
									<h4 class="box-title">Students Progress </h4>
									<ul class="box-controls pull-right d-md-flex d-none">
									  <li class="dropdown">
										<button class="btn btn-primary px-10 " data-bs-toggle="dropdown" href="#">View List</button>
									  </li>
									</ul>
								</div>
								<div class="box-body">
									<div class="d-flex align-items-center mb-30 gap-items-3 justify-content-between student-card"></div>
									<div class="d-flex align-items-center mb-30 gap-items-3 justify-content-between student-card"></div>
									<div class="d-flex align-items-center mb-30 gap-items-3 justify-content-between student-card"></div>
									<div class="d-flex align-items-center mb-30 gap-items-3 justify-content-between student-card"></div>
									<div class="d-flex align-items-center gap-items-3 justify-content-between student-card"></div>
								  </div>
								  
							</div>
						</div>
						<div class="col-12 col-xl-6">
							<div class="box-body">
								<div class="min-h-325">
									<div class="text-center">
										<h4 class="fw-600">User Online Time</h4>
										<p class="fs-16" id="online-time-text"></p>
										<div class="progress progress-sm">
											<div id="online-progress-bar" 
												 class="progress-bar progress-bar-primary progress-bar-striped progress-bar-animated" 
												 role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" 
												 style="width: 0%;">
											</div>
										</div>
									</div>
								</div>
								<div class="d-flex justify-content-center">
									<p class="d-flex align-items-center fw-600 mx-20">
										<span class="badge badge-xl badge-dot badge-warning me-20"></span> Progress
									</p>
									<p class="d-flex align-items-center fw-600 mx-20">
										<span class="badge badge-xl badge-dot badge-primary me-20"></span> Done
									</p>
								</div>
							</div>
							
						</div>
					</div>
					<div class="row">
						<div class="col-xl-6">
							<div class="box">
								<div class="box-body d-flex p-0">
									<div class="flex-grow-1 bg-danger p-30 flex-grow-1 bg-img" style="background-position: calc(100% + 0.5rem) bottom; background-size: auto 100%; background-image: url(../images/svg-icon/color-svg/custom-3.svg)">

										<h4 class="fw-400 text-white">Student Learning Progress</h4>
										<p class="my-10 fs-16 text-white">
											Tracking students' engagement in different subjects.
										</p>

										
										
									</div>
								</div>
							</div>
						</div>
						<div class="col-xl-6">
							<div class="box">
								<div class="box-body d-flex p-0">
								<div class="flex-grow-1 bg-primary p-30 flex-grow-1 bg-img" style="background-position: calc(100% + 0.5rem) bottom; background-size: auto 100%; background-image: url(../images/svg-icon/color-svg/custom-4.svg)">

									<h4 class="fw-400">Based On</h4>

									<div class="d-flex align-items-center justify-content-between mb-10 fs-16">
										<div class="d-flex">
											<span class="mt-5 me-10">
  <i class="fas fa-arrow-right"></i>
</span>

											<span class="text-white">Mathematics</span>
										</div>
										<div class="progress progress-sm w-50">
											<div id="math-progress" class="progress-bar progress-bar-warning progress-bar-striped progress-bar-animated" 
												role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
											</div>
										</div>
									</div>
								
									<!-- English Progress -->
									<div class="d-flex align-items-center justify-content-between mb-10 fs-16">
										<div class="d-flex">
											<span class="mt-5 me-10">
  <i class="fas fa-arrow-right"></i>
</span>

											<span class="text-white">English Language</span>
										</div>
										<div class="progress progress-sm w-50">
											<div id="english-progress" class="progress-bar progress-bar-primary progress-bar-striped progress-bar-animated" 
												role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
											</div>
										</div>
									</div>
								
									<!-- Science Progress -->
									<div class="d-flex align-items-center justify-content-between mb-10 fs-16">
										<div class="d-flex">
											<span class="mt-5 me-10">
  <i class="fas fa-arrow-right"></i>
</span>

											<span class="text-white">Basic Science</span>
										</div>
										<div class="progress progress-sm w-50">
											<div id="science-progress" class="progress-bar progress-bar-info progress-bar-striped progress-bar-animated" 
												role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
											</div>
										</div>
									</div>
								</div>
								</div>
							</div>
						</div>
					</div>
					<div class="box bg-transparent no-shadow mb-0">
						<div class="box-header no-border">
							<h4 class="box-title">Your Courses</h4>							
							<div class="box-controls pull-right d-md-flex d-none">
							  
							</div>
						</div>
					</div>
					<div class="box">
						<div class="box-body py-0">
							<div class="table-responsive">
								<table class="table no-border mb-0">
									<tbody id="coursesTableBody">
										<!-- Courses will be injected here dynamically -->
									</tbody>
								</table>
							</div>
						</div>
					</div>									
				</div>
				<div class="col-xl-4 col-12">
					<div class="box">
						<div class="box-body">							
							<div class="box no-shadow mb-0">
								<div class="box-body px-0 pt-0">
									<div id="calendar" class="dask evt-cal min-h-400"></div>
								</div>
							</div>
					
							<div class="box no-shadow mb-0">
								<div class="box-header no-border">
									<h4 class="box-title">Daily Coure Tips</h4>							
									<div class="box-controls pull-right d-md-flex d-none">
									  
									</div>
								</div>
							</div>
							<div class="px-5">
								<div id="courseContainer"></div>
							</div>
					
							<div class="box no-shadow mb-0">
								<div class="box-header no-border">
									<h4 class="box-title">Quiz</h4>							
									<div class="box-controls pull-right d-md-flex d-none">
									  
									</div>
								</div>
							</div>
							<div class="px-5">
								<div id="quizzesContainer"></div>
							</div>
							
						</div>
					</div>
				</div>
				
			</div>
		</section>
		<!-- /.content -->
	  </div>
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
   
	  &copy; 2025 All Rights Reserved Catchup.
  </footer>


  
  <!-- Add the sidebar's background. This div must be placed immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
  
</div>
<!-- ./wrapper -->
	
	
		
	
	
	<!-- Page Content overlay -->
	
	<script>
		async function fetchCourses() {
			try {
				const studentId = localStorage.getItem("studentId");
				const role = localStorage.getItem("role");
	
				if (!studentId) {
					alert("You must be logged in to view courses.");
					window.location.href = "/login.html";
					return;
				}
	
				// Fetch all courses
				const response = await fetch("https://catchup-project.onrender.com/api/offlinecourse");
				const courses = await response.json();
	
				// Filter courses by role (e.g., Primary, etc.)
				const filteredCourses = courses.filter(course =>
					course.category?.toLowerCase() === role?.toLowerCase()
				);
	
				// Limit to 8 courses
				const coursesToDisplay = filteredCourses.slice(0, 8);
	
				const tableBody = document.getElementById("coursesTableBody");
				tableBody.innerHTML = "";
	
				coursesToDisplay.forEach((course, index) => {
					const colorClasses = ["bg-danger", "bg-info", "bg-primary", "bg-success"];
					const color = colorClasses[index % colorClasses.length];
	
					const row = document.createElement("tr");
					row.innerHTML = `
						<td>
							<div class="${color} h-50 w-50 l-h-50 rounded text-center">
								<p class="mb-0 fs-20 fw-600">${course.title.charAt(0)}${index + 1}</p>
							</div>
						</td>
						<td class="fw-600">
							<a href="../../../coursedetails.html?id=${course._id}" 
							   class="text-primary text-decoration-underline course-link" 
							   data-id="${course._id}">
								${course.title}
							</a>
						</td>
						<td class="text-fade">${course.subject}.pdf</td>
						<td class="fw-500"><span class="badge badge-sm badge-dot badge-warning me-10"></span>Only view</td>
						<td class="text-fade">${course.meta.postedBy}</td>
					`;
					tableBody.appendChild(row);
				});
	
				attachCourseLinkEvents();
	
			} catch (error) {
				console.error("Error fetching courses:", error);
				alert("Something went wrong fetching courses.");
			}
		}
	
		async function attachCourseLinkEvents() {
			const links = document.querySelectorAll(".course-link");
			links.forEach(link => {
				link.addEventListener("click", async function (e) {
					e.preventDefault();
	
					const studentId = localStorage.getItem("studentId");
					
	
					try {
						const resProfile = await fetch(`https://catchup-project.onrender.com/api/users/profile/${studentId}`);
						const user = await resProfile.json();
						const now = new Date();
	
						const hasSubscription =
							user.subscriptions &&
							user.subscriptions.some(sub =>
								(sub.plan === "Per Subject" || sub.plan === "All Subjects") &&
								new Date(sub.endDate) > now
							);
	
						if (!hasSubscription) {
							alert("You have not subscribed to the required plan (Per Subject or All Subjects). You will now be redirected to the pricing page.");
							window.location.href = "../../../price.html";
							return;
						}
	
						// Subscription is valid â€“ navigate
						window.location.href = this.getAttribute("href");
	
					} catch (err) {
						console.error("Failed to verify subscription:", err);
						alert("An error occurred while checking your subscription.");
					}
				});
			});
		}
	
		// Load courses on page load
		fetchCourses();
	</script>
	
		
	
	<!-- Vendor JS -->
	<script src="js/vendors.min.js"></script>
	<script src="js/pages/chat-popup.js"></script>
    <script src="../assets/icons/feather-icons/feather.min.js"></script>

	<script src="../assets/vendor_components/apexcharts-bundle/dist/apexcharts.js"></script>
	<script src="../assets/vendor_components/moment/min/moment.min.js"></script>
	<script src="../assets/vendor_components/fullcalendar/fullcalendar.js"></script>
	
	<!-- CatchUp App -->
	<script src="js/template.js"></script>
	<script src="js/pages/dashboard.js"></script>
	<script src="js/pages/calendar.js"></script>




	<script>
		async function fetchQuizzes() {
			try {
				const response = await fetch("https://catchup-project.onrender.com/api/quiz");
				const quizData = await response.json();
	
				const role = localStorage.getItem("role"); // Assume this is "Primary"
				const container = document.getElementById("quizzesContainer");
				container.innerHTML = ""; // Clear previous content
	
				// Filter quizzes by category == role
				const filteredQuizzes = quizData.filter(quiz =>
					quiz.category?.toLowerCase() === role?.toLowerCase()
				);
	
				// Only take the first 8 quizzes
				const quizzesToDisplay = filteredQuizzes.slice(0, 8);
	
				quizzesToDisplay.forEach((quiz, index) => {
					const colorClasses = ["bg-warning", "bg-primary", "bg-danger"];
					const color = colorClasses[index % colorClasses.length];
	
					const subject = quiz.questions?.[0]?.subject || "General";
	
					const quizBox = `
						<div class="box mb-15">
							<div class="box-body">
								<div class="d-flex align-items-center justify-content-between">
									<div class="d-flex align-items-center">
										<div class="me-15 ${color} h-50 w-50 l-h-60 rounded text-center">
											<span class="icon-Book-open fs-24"></span>
										</div>
										<div class="d-flex flex-column fw-500">
											<a href="quiz.html?_id=${quiz._id}" class="text-dark hover-primary mb-1 fs-16">${subject} Quiz</a>
											<span class="text-fade">Category: ${quiz.category}</span>
										</div>
									</div>
									<a href="quiz.html?_id=${quiz._id}">
										<span class="icon-Arrow-right fs-24"></span>
									</a>
								</div>
							</div>
						</div>
					`;
	
					container.innerHTML += quizBox;
				});
			} catch (error) {
				console.error("Error fetching quizzes:", error);
			}
		}
	
		// Call the function when the page loads
		fetchQuizzes();
	</script>
	



	<script>
		// Add event listener to the Logout button
		document.getElementById('logout-button').addEventListener('click', function() {
		  // Remove studentId, token, and role from localStorage
		  localStorage.removeItem('studentId');
		  localStorage.removeItem('token');
		  localStorage.removeItem('role');
	  
		  // Optionally, redirect the user to the login page or homepage after logout
		  window.location.href = '../../../sign-in.html'; // or '/home' depending on your application
		});
	  </script>
	


<script>
	const courses = [
  { "title": "Mathematics", "time": "8am to 9am", "border": "border-primary", "avatars": ["avatar-1.png", "avatar-2.png", "avatar-3.png"] },
  { "title": "English Language", "time": "9am to 10am", "border": "border-success", "avatars": ["avatar-4.png", "avatar-5.png", "avatar-6.png"] },
  { "title": "Basic Science", "time": "10am to 11am", "border": "border-warning", "avatars": ["avatar-7.png", "avatar-8.png", "avatar-9.png"] },
  { "title": "Social Studies", "time": "11am to 12pm", "border": "border-info", "avatars": ["avatar-10.png", "avatar-11.png", "avatar-12.png"] },
  { "title": "Agricultural Science", "time": "12pm to 1pm", "border": "border-danger", "avatars": ["avatar-13.png", "avatar-14.png", "avatar-15.png"] },
  { "title": "Civic Education", "time": "1pm to 2pm", "border": "border-dark", "avatars": ["avatar-16.png", "avatar-17.png", "avatar-18.png"] },
  { "title": "Computer Science", "time": "2pm to 3pm", "border": "border-primary", "avatars": ["avatar-19.png", "avatar-20.png", "avatar-1.png"] },
  { "title": "Religious Studies", "time": "3pm to 4pm", "border": "border-success", "avatars": ["avatar-2.png", "avatar-3.png", "avatar-4.png"] },
  { "title": "Physical & Health Education", "time": "4pm to 5pm", "border": "border-warning", "avatars": ["avatar-5.png", "avatar-6.png", "avatar-7.png"] },
  { "title": "Creative Arts", "time": "5pm to 6pm", "border": "border-info", "avatars": ["avatar-8.png", "avatar-9.png", "avatar-10.png"] },
  { "title": "Home Economics", "time": "8am to 9am", "border": "border-danger", "avatars": ["avatar-11.png", "avatar-12.png", "avatar-13.png"] },
  { "title": "French Language", "time": "9am to 10am", "border": "border-dark", "avatars": ["avatar-14.png", "avatar-15.png", "avatar-16.png"] },
  { "title": "Music", "time": "10am to 11am", "border": "border-primary", "avatars": ["avatar-17.png", "avatar-18.png", "avatar-19.png"] },
  { "title": "Vocational Studies", "time": "11am to 12pm", "border": "border-success", "avatars": ["avatar-20.png", "avatar-1.png", "avatar-2.png"] },
  { "title": "Handwriting & Dictation", "time": "12pm to 1pm", "border": "border-warning", "avatars": ["avatar-3.png", "avatar-4.png", "avatar-5.png"] },
  { "title": "Moral Instruction", "time": "1pm to 2pm", "border": "border-info", "avatars": ["avatar-6.png", "avatar-7.png", "avatar-8.png"] },
  { "title": "Quantitative Reasoning", "time": "2pm to 3pm", "border": "border-danger", "avatars": ["avatar-9.png", "avatar-10.png", "avatar-11.png"] },
  { "title": "Verbal Reasoning", "time": "3pm to 4pm", "border": "border-dark", "avatars": ["avatar-12.png", "avatar-13.png", "avatar-14.png"] },
  { "title": "Storytelling & Reading", "time": "4pm to 5pm", "border": "border-primary", "avatars": ["avatar-15.png", "avatar-16.png", "avatar-17.png"] },
  { "title": "Spelling & Phonics", "time": "5pm to 6pm", "border": "border-success", "avatars": ["avatar-18.png", "avatar-19.png", "avatar-20.png"] }
]

	
	function getDailyCourses() {
		const date = new Date();
		const index = date.getDate() % courses.length; // Rotate daily based on date
		return [courses[index], courses[(index + 1) % courses.length]]; // Show 2 courses daily
	}
	
	function renderCourses() {
		const container = document.getElementById("courseContainer");
		container.innerHTML = "";
	
		const dailyCourses = getDailyCourses();
	
		dailyCourses.forEach(course => {
			const avatarsHtml = course.avatars.map(avatar => `
				<a href="#" class="me-15 bg-lightest h-50 w-50 l-h-50 rounded-circle text-center overflow-hidden">
					<img src="../images/avatar/${avatar}" class="h-50 align-self-end" alt="">
				</a>
			`).join("");
	
			const courseBox = `
				<div class="box bt-5 ${course.border} rounded">
					<div class="box-body">	
						<div class="flex-grow-1">	
							<div class="d-flex align-items-center pe-2 justify-content-between">							
								<h4 class="fw-500">${course.title}</h4>
								<div class="dropdown">
									<a data-bs-toggle="dropdown" href="#" class="px-10 pt-5"><i class="fas fa-ellipsis-v"></i></a>
									<div class="dropdown-menu dropdown-menu-end">
										<a class="dropdown-item" href="#"><i class="ti-import"></i> Import</a>
										<a class="dropdown-item" href="#"><i class="ti-export"></i> Export</a>
										<a class="dropdown-item" href="#"><i class="ti-printer"></i> Print</a>
										<div class="dropdown-divider"></div>
										<a class="dropdown-item" href="#"><i class="ti-settings"></i> Settings</a>
									</div>
								</div>						
							</div>
							<p class="fs-16">Every Day ${course.time}</p>
						</div>							
						<div class="d-flex align-items-center justify-content-between mt-10">
							<div class="d-flex">${avatarsHtml}</div>
							
						</div>
					</div>					
				</div>
			`;
	
			container.innerHTML += courseBox;
		});
	}
	
	// Call function on page load
	renderCourses();
	</script>
	





	<script>
		async function getStudentData() {
    try {
        // Retrieve studentId from localStorage
        const studentId = localStorage.getItem("studentId");

        if (!studentId) {
            console.log("Student ID not found in localStorage");
            return;
        }

        // Fetch student details from the backend
        const response = await fetch(`https://catchup-project.onrender.com/api/users/profile/${studentId}`);
        const studentData = await response.json();

        if (!studentData) {
            console.log("No data found for the student");
            return;
        }

        // Get the student's name
        const studentName = studentData.name || "John"; // Default to "John" if name is unavailable
        document.getElementById("studentName").innerText = studentName;

        // Calculate the progress
        const totalTasks = 100; // You should calculate or get this from your database
        const completedTasks = studentData.totalTimeSpent / 60; // Example: Using totalTimeSpent (in seconds) to calculate tasks completed

        const progress = (completedTasks / totalTasks) * 100;

        // Update progress on the page
        document.getElementById("studentProgress").innerText = `${Math.round(progress)}%`;

        // Determine the status based on the progress
        const progressStatus = progress >= 80 ? "very good" : progress >= 50 ? "good" : "needs improvement";
        document.getElementById("progressStatus").innerText = progressStatus;
    } catch (error) {
        console.error("Error fetching student data:", error);
    }
}

// Run the function on page load
getStudentData();

	</script>




<script>
	// List of 30 Nigerian student names from Igbo, Hausa, Yoruba, and others
const students = [
  "Chinedu", "Ngozi", "Emeka", "Amaka", "Obinna", "Uche", "Chiamaka", "Ifeanyi", "Oluchi", "Nnamdi", // Igbo
  "Abubakar", "Aisha", "Usman", "Fatima", "Bello", "Khadija", "Suleiman", "Hauwa", "Musa", "Zainab", // Hausa
  "Oluwaseun", "Adeola", "Temitope", "Femi", "Tolu", "Adebayo", "Folake", "Bolaji", "Yetunde", "Kunle"  // Yoruba
];

// Function to generate random progress between 10% and 100%
function getRandomProgress() {
  return Math.floor(Math.random() * (100 - 10 + 1)) + 10; // Random number between 10 and 100
}

// Function to shuffle and sort the student list by progress and update the DOM
function updateStudents() {
  // Create a list of students with their progress
  const studentsWithProgress = students.map((studentName) => {
    return {
      name: studentName,
      progress: getRandomProgress(),
    };
  });

  // Sort the students by progress in descending order (highest score first)
  studentsWithProgress.sort((a, b) => b.progress - a.progress);

  // Get all student divs
  const studentDivs = document.querySelectorAll('.student-card');

  studentDivs.forEach((div, index) => {
    if (studentsWithProgress[index]) {
      const studentName = studentsWithProgress[index].name;
      const progress = studentsWithProgress[index].progress;
      const progressClass = progress >= 75 ? 'primary' : progress >= 60 ? 'warning' : progress >= 40 ? 'danger' : 'info';
      const avatarIndex = index + 1;

      div.innerHTML = `
        <div class="d-flex align-items-center fw-500">
          <div class="me-15 w-50 d-table">
            <img src="../images/avatar/avatar-${avatarIndex}.png" class="avatar avatar-lg rounded10 bg-primary-light" alt="">
          </div>
          <div>
            <a href="#" class="text-dark hover-primary mb-5 d-block fs-16">${studentName}</a>
            <div class="w-200">
              <div class="progress progress-sm mb-0">
                <div class="progress-bar progress-bar-${progressClass} progress-bar-striped progress-bar-animated" role="progressbar" 
                  aria-valuenow="${progress}" aria-valuemin="0" aria-valuemax="100" style="width: ${progress}%">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="text-end">
          <h5 class="fw-600 mb-0 badge badge-pill badge-${progressClass}">${progress}%</h5>
        </div>
      `;
    }
  });
}

// Run initially
updateStudents();

// Update every 30 minutes (1800000 ms)
setInterval(updateStudents, 1800000);

</script>


	 <script>
		document.addEventListener("DOMContentLoaded", () => {
    let onlineTime = parseInt(localStorage.getItem("onlineTime")) || 0; // Retrieve stored time
    const maxTime = 1800; // 30 minutes in seconds
    const progressBar = document.getElementById("online-progress-bar");
    const timeText = document.getElementById("online-time-text");

    function updateOnlineTime() {
        onlineTime++;
        localStorage.setItem("onlineTime", onlineTime); // Store in localStorage
        updateProgressUI();
    }

    function updateProgressUI() {
        const minutes = Math.floor(onlineTime / 60);
        timeText.textContent = `${minutes} minute${minutes !== 1 ? "s" : ""} online`;

        const progressPercentage = Math.min((onlineTime / maxTime) * 100, 100);

        // Change color: Yellow at start, Normal after 50%
        if (progressPercentage < 50) {
            progressBar.classList.remove("progress-bar-primary");
            progressBar.classList.add("progress-bar-warning"); // Yellow before 50%
        } else {
            progressBar.classList.remove("progress-bar-warning");
            progressBar.classList.add("progress-bar-primary"); // Normal color after 50%
        }

        // Smooth transition effect
        progressBar.style.transition = "width 2s ease-in-out";
        progressBar.style.width = `${progressPercentage}%`;
        progressBar.setAttribute("aria-valuenow", progressPercentage);
    }

    // Update UI immediately after loading
    updateProgressUI();

    // Start tracking time every second
    setInterval(updateOnlineTime, 1000);
});

	 </script>
</body>
</html>
