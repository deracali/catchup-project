<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../images/favicon.ico">

    <title>CatchUp - Dashboard  User list</title>
  
	<!-- Vendors Style-->
	<link rel="stylesheet" href="css/vendors_css.css">
	  
	<!-- Style-->    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/skin_color.css">	

</head>
<body class="hold-transition light-skin sidebar-mini theme-primary fixed">
	
<div class="wrapper">
	<div id="loader"></div>

	<header class="main-header">
		<div class="d-flex align-items-center logo-box justify-content-start">
			<a href="#" class="waves-effect waves-light nav-link d-none d-md-inline-block mx-10 push-btn bg-transparent" data-toggle="push-menu" role="button">
				<i class="fas fa-bars"></i>
			</a>
				
			<!-- Logo -->
			<a href="index.html" class="logo">
			  <!-- logo-->
			  <div class="logo-lg">
				  <span class="light-logo"><img src="../images/logo-dark-text.png" alt="logo"></span>
				  <span class="dark-logo"><img src="../images/logo-light-text.png" alt="logo"></span>
			  </div>
			</a>	
		</div>  
		<!-- Header Navbar -->
		 
		<nav class="navbar navbar-static-top">
		  <!-- Sidebar toggle button-->
		  <div class="app-menu">
			
		  </div>
			
		  <div class="navbar-custom-menu r-side">
			<ul class="nav navbar-nav">    
			
				
			
				
			  
			  <!-- User Account-->
			  <li class="dropdown user user-menu">
				<a href="#" class="waves-effect waves-light dropdown-toggle" data-bs-toggle="dropdown" title="User">
					<i class="fas fa-user"></i>
				</a>
				<ul class="dropdown-menu animated flipInX">
					<li class="user-body">
						<a class="dropdown-item" href="#"><i class="fas fa-user text-muted me-2"></i> Profile</a>
						<a class="dropdown-item" href="#"><i class="fas fa-wallet text-muted me-2"></i> My Wallet</a>
						<a class="dropdown-item" href="#"><i class="fas fa-cog text-muted me-2"></i> Settings</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="#"><i class="fas fa-lock text-muted me-2"></i> Logout</a>
					</li>
				</ul>
			</li>    
			
			
			</ul>
		  </div>
		</nav>
	  </header>
	  
	  <aside class="main-sidebar">
		<!-- sidebar-->
		<section class="sidebar position-relative">    
			<div class="multinav">
				<div class="multinav-scroll" style="height: 100%;">    
					<!-- sidebar menu-->
					<ul class="sidebar-menu" data-widget="tree">    
						<li class="header">Dashboard & Apps</li>
						<li class="treeview">
							<a href="#">
								<i class="fas fa-th"></i>
								<span>Dashboard</span>
								<span class="pull-right-container">
									<i class="fa fa-angle-right pull-right"></i>
								</span>
							</a>
							<ul class="treeview-menu">
								<li><a href="index2.html"><i class="fas fa-chart-line"></i> Dashboard</a></li>
							</ul>
						</li>
		
						<li class="treeview">
							<a href="#">
								<i class="fas fa-file-alt"></i>
								<span>Forms & Tables</span>
								<span class="pull-right-container">
									<i class="fa fa-angle-right pull-right"></i>
								</span>
							</a>                    
							<ul class="treeview-menu">                    
								<li class="treeview">
									<a href="#">
										<i class="fas fa-edit"></i> Forms
										<span class="pull-right-container">
											<i class="fa fa-angle-right pull-right"></i>
										</span>
									</a>
									<ul class="treeview-menu">
										<li><a href="offlinecourseform.html"><i class="fas fa-plus-circle"></i> Create Offline Course</a></li>
										<li><a href="quizform.html"><i class="fas fa-poll"></i> Create Quiz</a></li>
									</ul>
								</li>         
								<li class="treeview">
									<a href="#">
										<i class="fas fa-table"></i> Tables
										<span class="pull-right-container">
											<i class="fa fa-angle-right pull-right"></i>
										</span>
									</a>
									<ul class="treeview-menu">
										<li><a href="quizTables.html"><i class="fas fa-list"></i> Quiz List</a></li>
										<li><a href="offlinecoursesTable.html"><i class="fas fa-book"></i> Offline Courses List</a></li>
										<li><a href="teacherReview.html"><i class="fas fa-star"></i> Teachers Review</a></li>
									</ul>
								</li>                    
							</ul>
						</li>
						
						<li class="treeview">
							<a href="#">
								<i class="fas fa-user"></i>
								<span>Pages</span>
								<span class="pull-right-container">
									<i class="fa fa-angle-right pull-right"></i>
								</span>
							</a>
							<ul class="treeview-menu">
								<li><a href="contact_userlist_grid.html"><i class="fas fa-chalkboard-teacher"></i> Teachers</a></li>
								<li><a href="contact_userlist.html"><i class="fas fa-user-graduate"></i> Students</a></li>    
							</ul>
						</li>
		
						<li class="header">LOGIN & ERROR </li>
						<li class="treeview">
							<a href="#">
								<i class="fas fa-lock"></i>
								<span>Authentication</span>
								<span class="pull-right-container">
									<i class="fa fa-angle-right pull-right"></i>
								</span>
							</a>
							<ul class="treeview-menu">
								<li><a href="auth_login.html"><i class="fas fa-sign-in-alt"></i> Login</a></li>
								<li><a href="auth_register.html"><i class="fas fa-user-plus"></i> Register</a></li>
								<li><a href="auth_lockscreen.html"><i class="fas fa-lock"></i> Lockscreen</a></li>
								<li><a href="auth_user_pass.html"><i class="fas fa-key"></i> Recover password</a></li>    
							</ul>
						</li>            
					</ul>
				</div>
			</div>
		</section>
		<div class="sidebar-footer">
			<a href="javascript:void(0)" class="link" data-bs-toggle="tooltip" title="Settings"><span class="icon-Settings-2"></span></a>
			<a href="mailbox.html" class="link" data-bs-toggle="tooltip" title="Email"><span class="icon-Mail"></span></a>
			<a href="javascript:void(0)" class="link" data-bs-toggle="tooltip" title="Logout"><span class="icon-Lock-overturning"><span class="path1"></span><span class="path2"></span></span></a>
		</div>
	  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
	  <div class="container-full">
		<!-- Content Header (Page header) -->	  
		<div class="content-header">
			<div class="d-flex align-items-center">
				<div class="me-auto">
					<h3 class="page-title">User list</h3>
					<div class="d-inline-block align-items-center">
						<nav>
							<ol class="breadcrumb">
								<li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i></a></li>
								<li class="breadcrumb-item" aria-current="page">Contact</li>
								<li class="breadcrumb-item active" aria-current="page">User list</li>
							</ol>
						</nav>
					</div>
				</div>
				
			</div>
		</div>  

		<!-- Main content -->
		<section class="content">
			<div class="row">
				<div class="col-lg-9 col-md-8">
					<div class="box">
					  <div class="media-list media-list-divided media-list-hover">
						<div id="users-container">
							<!-- Users will be dynamically added here -->
						</div>
						
						<button id="load-more-users" style="display: none;">Load More</button>
				
					  </div>
					</div>
				</div>
				<div class="col-lg-3 col-md-4">
					<div class="box no-shadow">
						<div class="box-body">
						  <a class="btn btn-outline btn-success mb-5 d-flex justify-content-between" href="javascript:void(0)">Online <span class="pull-right">103</span></a>
						  <a class="btn btn-outline btn-danger mb-5 d-flex justify-content-between" href="javascript:void(0)">Offline <span class="pull-right">19</span></a>
						  <a class="btn btn-outline btn-info mb-5 d-flex justify-content-between" href="javascript:void(0)">Available <span class="pull-right">623</span></a>
						  <a class="btn btn-outline btn-primary mb-5 d-flex justify-content-between" href="javascript:void(0)">Private <span class="pull-right">53</span></a>
						  <a class="btn btn-warning mt-10 d-flex justify-content-between" href="javascript:void(0)">All Contacts <span class="pull-right">123</span></a>
						  <a href="javascript:void(0)" data-bs-toggle="modal" data-bs-target="#myModal" class="btn btn-success mt-10 d-block text-center">+ Add New Contact</a>
					  </div>
					</div>
				</div>				
			</div>
		</section>
		<!-- /.content -->
	  </div>	  
  </div>
  <!-- /.content-wrapper -->
	
  <!-- Popup Model Plase Here -->
	  <div id="myModal" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="myModalLabel">Add Contact</h4>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form class="form-horizontal">
						<div class="form-group">
							<label class="col-md-12 form-label">Name</label>
							<div class="col-md-12">
								<input type="text" class="form-control" placeholder="Name">
							</div>
							<label class="col-md-12 form-label">Email</label>
							<div class="col-md-12">
								<input type="email" class="form-control" placeholder="Email">
							</div>
							<label class="col-md-12 form-label">Phone</label>
							<div class="col-md-12">
								<input type="tel" class="form-control" placeholder="Phone">
							</div>
						</div>
						<div class="form-group">
							<label class="col-md-12 form-label">Address</label>
							<div class="col-md-12">
								<textarea class="form-control" placeholder=""></textarea>
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-success" data-bs-dismiss="modal">Add</button>
					<button type="button" class="btn btn-danger float-end" data-bs-dismiss="modal">Cancel</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>


	<!-- /Popup Model Plase Here -->
 
   <footer class="main-footer">
   
	  &copy; 2025 All Rights Reserved Catchup.
  </footer>

  
  <!-- Add the sidebar's background. This div must be placed immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->
	
	
	
	
	
	<!-- Page Content overlay -->
	

	


	<script>
		document.addEventListener("DOMContentLoaded", async () => {
    const apiUrl = "https://catchup-project.onrender.com//api/users";
    const usersContainer = document.getElementById("users-container"); // Parent container for users
    const loadMoreUsersBtn = document.getElementById("load-more-users"); // Load More button

    let allUsers = []; // Stores all users from API
    let offset = 0;
    const limit = 10; // Number of users to show per batch

    // Fetch all users once
    async function fetchAllUsers() {
        try {
            const response = await fetch(apiUrl);
            allUsers = await response.json(); // Store the entire users list
console.log(allUsers)
            if (allUsers.length > limit) {
                loadMoreUsersBtn.style.display = "block"; // Show Load More button if there are more users
            }

            loadUsers(); // Load the first batch
        } catch (error) {
            console.error("Error fetching users:", error);
        }
    }

    // Load users dynamically
    function loadUsers() {
        const usersToShow = allUsers.slice(offset, offset + limit);

        usersToShow.forEach((user) => {
            const userEntry = document.createElement("div");
            userEntry.classList.add("media", "align-items-center");

            userEntry.innerHTML = `
                <span class="badge badge-dot badge-danger"></span>
                <a class="avatar avatar-lg status-success" href="#">
                    <img src="${user.image}" alt="${user.name}">
                </a>

                <div class="media-body">
                    <p>
                        <a href="#"><strong>${user.name}</strong></a>
                        <small class="sidetitle">Online</small>
                    </p>
                    <p>${user.role}</p>

              
                </div>

                <div class="media-right gap-items">
                    <a class="media-action lead" href="#" data-bs-toggle="tooltip" title="Orders"><i class="ti-shopping-cart"></i></a>
                    <a class="media-action lead" href="#" data-bs-toggle="tooltip" title="Receipts"><i class="ti-receipt"></i></a>

                    <div class="btn-group">
                        <a class="media-action lead" href="#" data-bs-toggle="dropdown"><i class="ion-android-more-vertical"></i></a>
                        <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item" href="#"><i class="fa fa-fw fa-user"></i> Profile</a>
                            <a class="dropdown-item" href="#"><i class="fa fa-fw fa-comments"></i> Messages</a>
                            <a class="dropdown-item" href="#"><i class="fa fa-fw fa-phone"></i> Call</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item delete-user" href="#" data-id="${user._id}"><i class="fa fa-fw fa-remove"></i> Remove</a>
                        </div>
                    </div>
                </div>
            `;

            usersContainer.appendChild(userEntry);

            // Attach delete event listener
            userEntry.querySelector(".delete-user").addEventListener("click", (event) => {
                event.preventDefault();
                deleteUser(user._id, userEntry);
            });
        });

        offset += limit;

        // Hide the button if no more users are left to load
        if (offset >= allUsers.length) {
            loadMoreUsersBtn.style.display = "none";
        }
    }

    // Delete user function
    async function deleteUser(userId, userEntry) {
        try {
            const response = await fetch(`${apiUrl}/delete/${userId}`, { method: "DELETE" });

            if (response.ok) {
                userEntry.remove();
            } else {
                console.error("Failed to delete user.");
            }
        } catch (error) {
            console.error("Error deleting user:", error);
        }
    }

    loadMoreUsersBtn.addEventListener("click", loadUsers);

    // Fetch all users initially
    fetchAllUsers();
});

	</script>


	<!-- Vendor JS -->
	<script src="js/vendors.min.js"></script>
	<script src="js/pages/chat-popup.js"></script>
    <script src="../assets/icons/feather-icons/feather.min.js"></script>	<script src="../assets/vendor_components/perfect-scrollbar-master/perfect-scrollbar.jquery.min.js"></script>
	
	<!-- CatchUp App -->
	<script src="js/template.js"></script>
	
	

</body>
</html>
