<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../images/favicon.ico">

    <title>EduAdmin - Dashboard</title>
    
	<!-- Vendors Style-->
	<link rel="stylesheet" href="css/vendors_css.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	
	<!-- Style-->  
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/skin_color.css">
	<link rel="stylesheet" type="text/css" href="css/custom-9.css">
	<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  </head>
  <style>
	#chart-container {
		width: 100%;
		height: 400px;
	}
	#reality-chart {
            width: 100%;
            height: 400px;
        }
</style>
<body class="hold-transition light-skin sidebar-mini theme-violet fixed">
	
<div class="wrapper">
  <div id="loader"></div>
	
  <header class="main-header">
	<div class="d-flex align-items-center logo-box justify-content-start">
		<a href="#" class="waves-effect waves-light nav-link d-none d-md-inline-block mx-10 push-btn bg-transparent" data-toggle="push-menu" role="button">
			<i class="fas fa-align-left"></i>

		</a>	
		<!-- Logo -->
		<a href="index.html" class="logo">
		  <!-- logo-->
		  <div class="logo-lg">
			  <span class="light-logo"><img src="../images/logo-dark-text.png" alt="logo"></span>
			  <span class="dark-logo"><img src="../images/logo-light-text.png" alt="logo"></span>
		  </div>
		</a>	
	</div>  
    <!-- Header Navbar -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
	  <div class="app-menu">
		<ul class="header-megamenu nav">
			<li class="btn-group nav-item d-md-none">
				<a href="#" class="waves-effect waves-light nav-link push-btn" data-toggle="push-menu" role="button">
					<i class="fas fa-align-left"></i>

			    </a>
			</li>
		
		</ul> 
	  </div>
		
      <div class="navbar-custom-menu r-side">
        <ul class="nav navbar-nav">	
		
		  
	      <!-- User Account-->
          <li class="dropdown user user-menu">
            <a href="#" class="waves-effect waves-light dropdown-toggle" data-bs-toggle="dropdown" title="User">
				<i class="fas fa-user"></i>
            </a>
            <ul class="dropdown-menu animated flipInX">
              <li class="user-body">
				 <a class="dropdown-item" href="#"><i class="ti-user text-muted me-2"></i> Profile</a>
				 <a class="dropdown-item" href="#"><i class="ti-wallet text-muted me-2"></i> My Wallet</a>
				 <a class="dropdown-item" href="#"><i class="ti-settings text-muted me-2"></i> Settings</a>
				 <div class="dropdown-divider"></div>
				 <a class="dropdown-item" href="#"><i class="ti-lock text-muted me-2"></i> Logout</a>
              </li>
            </ul>
          </li>	
		  
          <!-- Control Sidebar Toggle Button -->
          <li>
              <a href="#" data-toggle="control-sidebar" title="Setting" class="waves-effect waves-light">
			  	<i class="icon-Settings"><span class="path1"></span><span class="path2"></span></i>
			  </a>
          </li>
			
        </ul>
      </div>
    </nav>
  </header>
  
  <aside class="main-sidebar">
    <!-- sidebar-->
    <section class="sidebar position-relative">	
	  	<div class="multinav">
		  <div class="multinav-scroll" style="height: 100%;">	
			  <!-- sidebar menu-->
			  <ul class="sidebar-menu" data-widget="tree">	
				<li class="header">Dashboard & Apps</li>
				
				<li><a href="index9.html"><i class="fas fa-code-branch"></i>Dashboard</a></li>
			
					 	     
			  </ul>
		  </div>
		</div>
    </section>
	<div class="sidebar-footer">
		<a href="javascript:void(0)" class="link" data-bs-toggle="tooltip" title="Settings"><span class="icon-Settings-2"></span></a>
		<a href="mailbox.html" class="link" data-bs-toggle="tooltip" title="Email"><span class="icon-Mail"></span></a>
		<a href="javascript:void(0)" class="link" data-bs-toggle="tooltip" title="Logout"><span class="icon-Lock-overturning"><span class="path1"></span><span class="path2"></span></span></a>
	</div>
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
	  <div class="container-full">
		<!-- Main content -->
		<section class="content">
			<div class="row align-items-center">
				<div class="col-xxl-4">
					<div class="box-body px-5">
						<div class="d-flex align-items-center">
							<h1 class="fw-600 mb-5 mt-0">Hi, Jhon!</h1>
							<div><span class="avatar l-h-30 w-30 h-30 bg-primary-light rounded-circle ms-5 mt-n1 border-primary b-1 mb-5"><i class="fa fa-user"></i></span></div>
							<div style="margin-left: -8px;"><span class="avatar l-h-30 w-30 h-30 bg-secondary-light rounded-circle border-secondary b-1 mb-5"><i class="fa fa-graduation-cap"></i></span></div>
						</div>
						<h1 class="fw-600 m-0 l-h-48">What do you want to <span class="text-primary">Learn</span> Today ?</h1>
						<p class="text-fade fs-16">Discover courses, track progress, and achieve your learning goals searmiessly.</p>
					</div>
				</div>
				<div class="col-xxl-8">
					<div class="box-body px-5">
						<div class="d-flex justify-content-around align-items-center overflow-auto" id="coursesContainer">
							<!-- Dynamic Courses Will Load Here -->
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-xxl-8">
					<div class="row fx-element-overlay">
						<div class="col-12">														
							<div class="box no-shadow mb-0 bg-transparent">
								<div class="box-header d-flex justify-content-between align-items-center no-border px-0">
									<h3 class="fw-500 m-0 fs-22">All New Courses</h3>	
									<a href="#">View All</a>
								</div>
							</div>
						</div>
						<div class="container">
							<div class="row" id="latestCoursesContainer">
								<!-- Latest courses will be dynamically loaded here -->
							</div>
						</div>			
					</div>
				</div>
				<div class="col-xxl-4">
					<div class="box bg-black">
						<div class="box-body">
							<div class="row">
								<div class="col-8">
									<img src="../images/logo-light-text.png" alt="logo">
									<h3 class="mt-25 fw-500">Educational Live Course</h3>
<p class="text-fade">Join now to access interactive sessions and enhance your learning.</p>

								</div>
								<div class="col-4 book-image align-content-center text-center">
									<img src="../images/front-end-img/courses/book-3.png" alt="">
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="col-lg-4">
					<div class="box">
						<div class="box-body">							
							<div id="calendar" class="dask evt-cal min-h-400"></div>
						</div>
					</div>
				</div>
				<div class="col-lg-4">
					<div class="row">
						<div class="col-12">														
							<div class="box no-shadow mb-0 bg-transparent">
								<div class="box-header px-0 b-0">
									<h3 class="fw-500 m-0 fs-22">Progress</h3>
								</div>
							</div>
						</div>
						<div class="col-12">
							<div class="box">
								<canvas id="timeSpentChart"></canvas>
							</div>
						</div>
							
					</div>
				</div>
				<div class="col-xl-4 col-lg-5 col-12">
					<div class="box">
						<div class="box-header no-border">
							<h3 class="fw-500 m-0 fs-22">Upcoming Quiz</h3>		
						</div>
						<div class="quiz-container"></div>

						<!-- Load More Button -->
						<div class="text-center pull-up">
							<button id="loadMore" class="btn d-grid btn-primary-light waves-effect">Load More</button>
						</div>
					</div>
				</div>
				<div class="col-xl-8 col-lg-7 col-12">
					<div class="box bg-transparent no-shadow mb-20">
						<div class="box-header no-border d-flex justify-content-between align-items-center pb-0 px-0">
							<h3 class="fw-500 m-0 fs-22">Your Course</h3>
							<div class="dropdown">
								<button class="btn btn-light py-5 dropdown-toggle text-fade sem-drop" type="button" data-bs-toggle="dropdown" aria-expanded="false">Active </button>
								<div class="dropdown-menu dropdown-menu-end" style="">
									<a class="dropdown-item" href="#">Close</a>
									<a class="dropdown-item" href="#">Progress</a>
									<a class="dropdown-item" href="#">Panding</a>
								</div>
							</div>
						</div>
					</div>
					<div class="course-container"></div>
				</div>
			
			</div>
		</section>
		<!-- /.content -->
	  </div>
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
   
	  &copy; 2025 All Rights Reserved Catchup.
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar">
	  
	<div class="rpanel-title"><span class="pull-right btn btn-circle btn-danger"><i class="ion ion-close text-white" data-toggle="control-sidebar"></i></span> </div>  <!-- Create the tabs -->
    <ul class="nav nav-tabs control-sidebar-tabs">
      <li class="nav-item"><a href="#control-sidebar-home-tab" data-bs-toggle="tab" class="active"><i class="mdi mdi-message-text"></i></a></li>
      <li class="nav-item"><a href="#control-sidebar-settings-tab" data-bs-toggle="tab"><i class="mdi mdi-playlist-check"></i></a></li>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
      <!-- Home tab content -->
      <div class="tab-pane active" id="control-sidebar-home-tab">
          <div class="flexbox">
			<a href="javascript:void(0)" class="text-grey">
				<i class="ti-more"></i>
			</a>	
			<p>Users</p>
			<a href="javascript:void(0)" class="text-end text-grey"><i class="ti-plus"></i></a>
		  </div>
		  <div class="lookup lookup-sm lookup-right d-none d-lg-block">
			<input type="text" name="s" placeholder="Search" class="w-p100">
		  </div>
          <div class="media-list media-list-hover mt-20">
			<div class="media py-10 px-0">
			  <a class="avatar avatar-lg status-success" href="#">
				<img src="../images/avatar/1.jpg" alt="...">
			  </a>
			  <div class="media-body">
				<p class="fs-16">
				  <a class="hover-primary" href="#"><strong>Tyler</strong></a>
				</p>
				<p>Praesent tristique diam...</p>
				  <span>Just now</span>
			  </div>
			</div>

			<div class="media py-10 px-0">
			  <a class="avatar avatar-lg status-danger" href="#">
				<img src="../images/avatar/2.jpg" alt="...">
			  </a>
			  <div class="media-body">
				<p class="fs-16">
				  <a class="hover-primary" href="#"><strong>Luke</strong></a>
				</p>
				<p>Cras tempor diam ...</p>
				  <span>33 min ago</span>
			  </div>
			</div>

			<div class="media py-10 px-0">
			  <a class="avatar avatar-lg status-warning" href="#">
				<img src="../images/avatar/3.jpg" alt="...">
			  </a>
			  <div class="media-body">
				<p class="fs-16">
				  <a class="hover-primary" href="#"><strong>Evan</strong></a>
				</p>
				<p>In posuere tortor vel...</p>
				  <span>42 min ago</span>
			  </div>
			</div>

			<div class="media py-10 px-0">
			  <a class="avatar avatar-lg status-primary" href="#">
				<img src="../images/avatar/4.jpg" alt="...">
			  </a>
			  <div class="media-body">
				<p class="fs-16">
				  <a class="hover-primary" href="#"><strong>Evan</strong></a>
				</p>
				<p>In posuere tortor vel...</p>
				  <span>42 min ago</span>
			  </div>
			</div>			
			
			<div class="media py-10 px-0">
			  <a class="avatar avatar-lg status-success" href="#">
				<img src="../images/avatar/1.jpg" alt="...">
			  </a>
			  <div class="media-body">
				<p class="fs-16">
				  <a class="hover-primary" href="#"><strong>Tyler</strong></a>
				</p>
				<p>Praesent tristique diam...</p>
				  <span>Just now</span>
			  </div>
			</div>

			<div class="media py-10 px-0">
			  <a class="avatar avatar-lg status-danger" href="#">
				<img src="../images/avatar/2.jpg" alt="...">
			  </a>
			  <div class="media-body">
				<p class="fs-16">
				  <a class="hover-primary" href="#"><strong>Luke</strong></a>
				</p>
				<p>Cras tempor diam ...</p>
				  <span>33 min ago</span>
			  </div>
			</div>

			<div class="media py-10 px-0">
			  <a class="avatar avatar-lg status-warning" href="#">
				<img src="../images/avatar/3.jpg" alt="...">
			  </a>
			  <div class="media-body">
				<p class="fs-16">
				  <a class="hover-primary" href="#"><strong>Evan</strong></a>
				</p>
				<p>In posuere tortor vel...</p>
				  <span>42 min ago</span>
			  </div>
			</div>

			<div class="media py-10 px-0">
			  <a class="avatar avatar-lg status-primary" href="#">
				<img src="../images/avatar/4.jpg" alt="...">
			  </a>
			  <div class="media-body">
				<p class="fs-16">
				  <a class="hover-primary" href="#"><strong>Evan</strong></a>
				</p>
				<p>In posuere tortor vel...</p>
				  <span>42 min ago</span>
			  </div>
			</div>
			  
		  </div>

      </div>
      <!-- /.tab-pane -->
      <!-- Settings tab content -->
      <div class="tab-pane" id="control-sidebar-settings-tab">
          <div class="flexbox">
			<a href="javascript:void(0)" class="text-grey">
				<i class="ti-more"></i>
			</a>	
			<p>Todo List</p>
			<a href="javascript:void(0)" class="text-end text-grey"><i class="ti-plus"></i></a>
		  </div>
        <ul class="todo-list mt-20">
			<li class="py-15 px-5 by-1">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_1" class="filled-in">
			  <label for="basic_checkbox_1" class="mb-0 h-15"></label>
			  <!-- todo text -->
			  <span class="text-line">Nulla vitae purus</span>
			  <!-- Emphasis label -->
			  <small class="badge bg-danger"><i class="fa fa-clock-o"></i> 2 mins</small>
			  <!-- General tools such as edit or delete-->
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
			<li class="py-15 px-5">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_2" class="filled-in">
			  <label for="basic_checkbox_2" class="mb-0 h-15"></label>
			  <span class="text-line">Phasellus interdum</span>
			  <small class="badge bg-info"><i class="fa fa-clock-o"></i> 4 hours</small>
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
			<li class="py-15 px-5 by-1">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_3" class="filled-in">
			  <label for="basic_checkbox_3" class="mb-0 h-15"></label>
			  <span class="text-line">Quisque sodales</span>
			  <small class="badge bg-warning"><i class="fa fa-clock-o"></i> 1 day</small>
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
			<li class="py-15 px-5">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_4" class="filled-in">
			  <label for="basic_checkbox_4" class="mb-0 h-15"></label>
			  <span class="text-line">Proin nec mi porta</span>
			  <small class="badge bg-success"><i class="fa fa-clock-o"></i> 3 days</small>
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
			<li class="py-15 px-5 by-1">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_5" class="filled-in">
			  <label for="basic_checkbox_5" class="mb-0 h-15"></label>
			  <span class="text-line">Maecenas scelerisque</span>
			  <small class="badge bg-primary"><i class="fa fa-clock-o"></i> 1 week</small>
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
			<li class="py-15 px-5">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_6" class="filled-in">
			  <label for="basic_checkbox_6" class="mb-0 h-15"></label>
			  <span class="text-line">Vivamus nec orci</span>
			  <small class="badge bg-info"><i class="fa fa-clock-o"></i> 1 month</small>
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
			<li class="py-15 px-5 by-1">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_7" class="filled-in">
			  <label for="basic_checkbox_7" class="mb-0 h-15"></label>
			  <!-- todo text -->
			  <span class="text-line">Nulla vitae purus</span>
			  <!-- Emphasis label -->
			  <small class="badge bg-danger"><i class="fa fa-clock-o"></i> 2 mins</small>
			  <!-- General tools such as edit or delete-->
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
			<li class="py-15 px-5">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_8" class="filled-in">
			  <label for="basic_checkbox_8" class="mb-0 h-15"></label>
			  <span class="text-line">Phasellus interdum</span>
			  <small class="badge bg-info"><i class="fa fa-clock-o"></i> 4 hours</small>
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
			<li class="py-15 px-5 by-1">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_9" class="filled-in">
			  <label for="basic_checkbox_9" class="mb-0 h-15"></label>
			  <span class="text-line">Quisque sodales</span>
			  <small class="badge bg-warning"><i class="fa fa-clock-o"></i> 1 day</small>
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
			<li class="py-15 px-5">
			  <!-- checkbox -->
			  <input type="checkbox" id="basic_checkbox_10" class="filled-in">
			  <label for="basic_checkbox_10" class="mb-0 h-15"></label>
			  <span class="text-line">Proin nec mi porta</span>
			  <small class="badge bg-success"><i class="fa fa-clock-o"></i> 3 days</small>
			  <div class="tools">
				<i class="fa fa-edit"></i>
				<i class="fa fa-trash-o"></i>
			  </div>
			</li>
		  </ul>
      </div>
      <!-- /.tab-pane -->
    </div>
  </aside>
  <!-- /.control-sidebar -->
  
  <!-- Add the sidebar's background. This div must be placed immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
  
</div>
<!-- ./wrapper -->
	
	
		
	
	
	<!-- Page Content overlay -->
	
	
	<!-- Vendor JS -->
	<script src="js/vendors.min.js"></script>
	<script src="js/pages/chat-popup.js"></script>
    <script src="../assets/icons/feather-icons/feather.min.js"></script>	
	
	<script src="../assets/vendor_components/apexcharts-bundle/dist/apexcharts.js"></script>
	<script src="../assets/vendor_components/moment/min/moment.min.js"></script>
	<script src="../assets/vendor_components/fullcalendar/fullcalendar.js"></script>
	<script src="../../npm/echarts%405/dist/echarts.min.js"></script>
	<script src="../assets/vendor_components/jquery.peity/jquery.peity.js"></script>
	
	
	<!-- EduAdmin App -->
	<script src="js/template.js"></script>
	<script src="js/pages/dashboard9.js"></script>
	<script src="js/pages/calendar.js"></script>
	<script src="js/pages/peity.js"></script>
	






	<script>
        async function fetchCourses() {
            try {
                const response = await fetch("http://localhost:3000/api/offlinecourse");
                const courses = await response.json();

                // Filter only "Secondary" category and limit to 4 courses
                const secondaryCourses = courses
                    .filter(course => course.category === "Secondary")
                    .slice(0, 4);

                const container = document.getElementById("coursesContainer");

                // Inject courses dynamically
                secondaryCourses.forEach(course => {
                    const courseElement = document.createElement("div");
                    courseElement.classList.add("me-15", "mb-15", "mb-md-0");

                    courseElement.innerHTML = `
                        <div class="box m-0 no-shadow">
                            <div class="box-body">
                                <div class="text-center mb-10">
                                    <img src="${course.courseImage}" class="max-w-150" width="150" alt="${course.title}">
                                </div>
                                <h4 class="m-0 fw-500 text-truncate">${course.title}</h4>
                                <p class="text-fade">Instructor: ${course.instructor.name}</p>
                            </div>
                        </div>
                    `;

                    container.appendChild(courseElement);
                });

            } catch (error) {
                console.error("Error fetching courses:", error);
            }
        }

        // Fetch courses on page load
        fetchCourses();
    </script>




<script>
	async function fetchLatestCourses() {
		try {
			const response = await fetch("http://localhost:3000/api/offlinecourse");
			const courses = await response.json();

			// Sort by createdAt in descending order (latest first) and get only 3
			const latestCourses = courses
				.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
				.slice(0, 3);

			const container = document.getElementById("latestCoursesContainer");

			latestCourses.forEach(course => {
				const courseElement = document.createElement("div");
				courseElement.classList.add("col-lg-4", "col-md-6", "col-12");

				courseElement.innerHTML = `
					<div class="box pull-up">
						<div class="box-body">
							<div class="d-flex align-items-center">
								<img src="${course.courseImage}" alt="" class="align-self-end h-70 w-70">
								<div class="d-flex flex-column flex-grow-1">
									<h4 class="mb-1">${course.title}</h4>
									<p class="text-fade m-0">${course.highlights.length} Courses</p>
								</div>
							</div>
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<p class="m-0 text-fade fw-500">Rate</p>
									<h4 class="m-0"><i class="fa-solid fa-star text-warning fs-16"></i> ${course.meta.rating || "4.5"}</h4>
								</div>
								<div>
									<p class="m-0 text-fade fw-500">Type</p>
									<h4 class="m-0">${course.category}</h4>
								</div>
							</div>
						</div>
					</div>
				`;

				container.appendChild(courseElement);
			});

		} catch (error) {
			console.error("Error fetching latest courses:", error);
		}
	}

	// Fetch latest courses on page load
	fetchLatestCourses();
</script>





<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/peity@3.3.0/jquery.peity.min.js"></script>
<script>
	document.addEventListener("DOMContentLoaded", async function () {
		let timeSpent = localStorage.getItem("timeSpent") ? parseInt(localStorage.getItem("timeSpent")) : 0;

		function updateTimeSpent() {
			timeSpent++;
			localStorage.setItem("timeSpent", timeSpent);
			updateProgress();
		}

		setInterval(updateTimeSpent, 1000);

		async function fetchCourses() {
			try {
				const response = await fetch("http://localhost:3000/api/offlinecourse");
				const courses = await response.json();
				displayCourses(courses);
			} catch (error) {
				console.error("Error fetching courses:", error);
			}
		}

		function displayCourses(courses) {
			const courseContainer = document.querySelector(".course-container");
			courseContainer.innerHTML = "";

			courses.forEach((course, index) => {
				const progress = calculateProgress(timeSpent, index);
				const courseElement = `
					<div class="box mb-15 pull-up">
						<div class="box-body">
							<div class="d-flex align-items-center justify-content-between">
								<div class="d-flex align-items-center">
									<div class="me-15 bg-primary-light h-50 w-50 l-h-40 rounded text-center">
										<img src="${course.image}" alt="" class="align-self-end h-50 w-50">
									</div>
									<div class="d-flex flex-column fw-500">
										<a href="#" class="text-dark hover-primary mb-1 fs-16">${course.title}</a>
										<span class="text-fade">${course.instructor}, ${course.date}</span>
									</div>
								</div>
								<div>
									<p class="m-0 text-fade">${progress >= 100 ? "Completed" : "In Progress"}</p>
									<h5 class="m-0">${course.duration}</h5>
								</div>
								<div class="d-none d-md-block">
									<span class="donut" data-peity='{ "fill": ["#17b3a3", "#f3f5f6"], "innerRadius": 24, "radius": 28 }'>${progress / 10},10</span> ${progress}%
								</div>
							</div>
						</div>
					</div>
				`;
				courseContainer.innerHTML += courseElement;
			});

			jQuery(".donut").peity("donut");
		}

		function calculateProgress(timeSpent, index) {
			const maxTime = 3600; 
			return Math.min(100, Math.floor((timeSpent / (maxTime * (index + 1))) * 100));
		}

		function updateProgress() {
			document.querySelectorAll(".donut").forEach((el, index) => {
				const progress = calculateProgress(timeSpent, index);
				el.innerHTML = `${progress / 10},10`;
			});
		}

		fetchCourses();
	});
</script>







<script>
	document.addEventListener("DOMContentLoaded", async function () {
		let quizzes = []; // Store all quizzes
		let displayedCount = 0; // Tracks how many quizzes are displayed
		let limit = 4; // Number of quizzes to display per click

		async function fetchQuizzes() {
			try {
				const response = await fetch(`http://localhost:3000/api/quiz`); // Fetch all quizzes
				quizzes = await response.json();

				if (quizzes.length === 0) {
					document.getElementById("loadMore").style.display = "none";
					return;
				}

				displayQuizzes(); // Display initial quizzes
			} catch (error) {
				console.error("Error fetching quizzes:", error);
			}
		}

		function displayQuizzes() {
			const quizContainer = document.querySelector(".quiz-container");
			const nextQuizzes = quizzes.slice(displayedCount, displayedCount + limit);

			nextQuizzes.forEach(quiz => {
				const quizElement = `
					<div class="d-flex align-items-center justify-content-between mb-15">
						<div class="d-flex align-items-center">
							<div class="me-15">
								<img src="../images/front-end-img/courses/web.png" alt="" class="align-self-end h-50 w-50">
							</div>
							<div class="d-flex flex-column fw-500">
								<a href="quiz.html?_id=${quiz._id}" class="text-dark hover-primary mb-1 fs-16">${quiz.quizzes[0].subject}</a>
								<span class="text-fade">${new Date(quiz.createdAt).toLocaleDateString()}</span>
							</div>
						</div>
						<a href="quiz.html?_id=${quiz._id}">
							<span class="icon-Arrow-right fs-24"><span class="path1"></span><span class="path2"></span></span>
						</a>
					</div>
				`;
				quizContainer.innerHTML += quizElement;
			});

			displayedCount += limit;

			// Hide the button if no more quizzes left
			if (displayedCount >= quizzes.length) {
				document.getElementById("loadMore").style.display = "none";
			}
		}

		document.getElementById("loadMore").addEventListener("click", displayQuizzes);

		fetchQuizzes(); // Load initial quizzes
	});
</script>






<script>
	let startTime = Date.now();

	function getTimeSpent() {
		let storedTime = localStorage.getItem("timeSpent") || 0;
		return parseInt(storedTime);
	}

	function saveTimeSpent() {
		let currentTime = Date.now();
		let elapsedTime = Math.floor((currentTime - startTime) / 1000); // Convert to seconds

		let totalTime = getTimeSpent() + elapsedTime;
		localStorage.setItem("timeSpent", totalTime);

		updateChart(totalTime);
	}

	function formatTime(seconds) {
		let h = Math.floor(seconds / 3600);
		let m = Math.floor((seconds % 3600) / 60);
		let s = seconds % 60;
		return `${h}h ${m}m ${s}s`;
	}

	function updateChart(timeSpent) {
		let ctx = document.getElementById("timeSpentChart").getContext("2d");

		if (window.timeSpentChart) {
			window.timeSpentChart.destroy();
		}

		window.timeSpentChart = new Chart(ctx, {
			type: "doughnut",
			data: {
				labels: ["Time Spent", "Remaining (24h)"],
				datasets: [{
					data: [timeSpent, 86400 - timeSpent], // 24 hours = 86400 seconds
					backgroundColor: ["#17b3a3", "#f3f5f6"]
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				plugins: {
					tooltip: {
						callbacks: {
							label: function (tooltipItem) {
								return formatTime(tooltipItem.raw);
							}
						}
					}
				}
			}
		});
	}

	// Load time spent when the page loads
	document.addEventListener("DOMContentLoaded", () => {
		updateChart(getTimeSpent());
	});

	// Save time spent before leaving the page
	window.addEventListener("beforeunload", saveTimeSpent);
</script>










</body>
</html>
