<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../images/favicon.ico">

    <title>CatchUp - Dashboard  CustomTable </title>
  
	<!-- Vendors Style-->
	<link rel="stylesheet" href="css/vendors_css.css">
	  
	<!-- Style-->  
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/skin_color.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	
</head>

<body class="hold-transition light-skin sidebar-mini theme-primary fixed">
	
<div class="wrapper">
	<div id="loader"></div>

 	
  	
	<header class="main-header">
		<div class="d-flex align-items-center logo-box justify-content-start">
			<a href="#" class="waves-effect waves-light nav-link d-none d-md-inline-block mx-10 push-btn bg-transparent" data-toggle="push-menu" role="button">
				<i class="fas fa-bars"></i>
			</a>
				
			<!-- Logo -->
			<a href="index.html" class="logo">
			  <!-- logo-->
			  <div class="logo-lg">
				  <span class="light-logo"><img src="../images/logo-dark-text.png" alt="logo"></span>
				  <span class="dark-logo"><img src="../images/logo-light-text.png" alt="logo"></span>
			  </div>
			</a>	
		</div>  
		<!-- Header Navbar -->
		 
		<nav class="navbar navbar-static-top">
		  <!-- Sidebar toggle button-->
		  <div class="app-menu">
		
		  </div>
			
		  <div class="navbar-custom-menu r-side">
			<ul class="nav navbar-nav">    
			
				
			
				
			  
			  <!-- User Account-->
			  <li class="dropdown user user-menu">
				<a href="#" class="waves-effect waves-light dropdown-toggle" data-bs-toggle="dropdown" title="User">
					<i class="fas fa-user"></i>
				</a>
				<ul class="dropdown-menu animated flipInX">
					<li class="user-body">
						<a class="dropdown-item" href="#"><i class="fas fa-user text-muted me-2"></i> Profile</a>
						<a class="dropdown-item" href="#"><i class="fas fa-wallet text-muted me-2"></i> My Wallet</a>
						<a class="dropdown-item" href="#"><i class="fas fa-cog text-muted me-2"></i> Settings</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="#"><i class="fas fa-lock text-muted me-2"></i> Logout</a>
					</li>
				</ul>
			</li>    
			
			
			</ul>
		  </div>
		</nav>
	  </header>
	  
	  <aside class="main-sidebar">
		<!-- sidebar-->
		<section class="sidebar position-relative">    
			<div class="multinav">
				<div class="multinav-scroll" style="height: 100%;">    
					<!-- sidebar menu-->
				<ul class="sidebar-menu" data-widget="tree">    
					<li class="header">Dashboard & Apps</li>
					<li class="treeview">	
							<span class="pull-right-container">
						
								<li><a href="index2.html"><i class="fas fa-chart-line"></i> Dashboard</a></li>
							</span>
							<li><a href="offlinecourseform.html"><i class="fas fa-plus-circle"></i> Create Offline Course</a></li>
							<li><a href="quizform.html"><i class="fas fa-poll"></i> Create Quiz</a></li>
							<li><a href="quizTables.html"><i class="fas fa-list"></i> Quiz List</a></li>
									<li><a href="offlinecoursesTable.html"><i class="fas fa-book"></i> Offline Courses List</a></li>
									<li><a href="teacherReview.html"><i class="fas fa-star"></i> Teachers Review</a></li>
									<li><a href="contact_userlist_grid.html"><i class="fas fa-chalkboard-teacher"></i> Teachers</a></li>
									<li><a href="contact_userlist.html"><i class="fas fa-user-graduate"></i> Students</a></li>    
								</li>   
				</ul>
				</div>
			</div>
		</section>
		<div class="sidebar-footer">
			<a href="javascript:void(0)" class="link" data-bs-toggle="tooltip" title="Settings"><span class="icon-Settings-2"></span></a>
			<a href="mailbox.html" class="link" data-bs-toggle="tooltip" title="Email"><span class="icon-Mail"></span></a>
			<a href="javascript:void(0)" class="link" data-bs-toggle="tooltip" title="Logout"><span class="icon-Lock-overturning"><span class="path1"></span><span class="path2"></span></span></a>
		</div>
	  </aside>
  
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
	  <div class="container-full">
		<!-- Content Header (Page header) -->
		<div class="content-header">
			<div class="d-flex align-items-center">
				<div class="me-auto">
					<h3 class="page-title">CustomTable</h3>
					<div class="d-inline-block align-items-center">
						<nav>
							<ol class="breadcrumb">
								<li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i></a></li>
								<li class="breadcrumb-item" aria-current="page">Tables</li>
								<li class="breadcrumb-item active" aria-current="page">CustomTable</li>
							</ol>
						</nav>
					</div>
				</div>
				
			</div>
		</div>

		<!-- Main content -->
		<section class="content">

		  <div class="row">

			  <div class="col-12">
				<div class="box">
					<div class="box-header">
						<h4 class="box-title">Manage <strong>Offline Courses</strong></h4>	
						<h6 class="subtitle">View and remove offline courses as needed.</h6>
					</div> 

                    <div class="box-body">
                        <div class="table-responsive">
                            <table id="liveCourseTable" class="table table-bordered table-separated">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Instructor</th>
                                        <th>Category</th>
                                        <th>Subject</th>
                                        <th>Posted By</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <button id="loadMoreBtn" class="btn btn-primary mt-3">Load More</button>
                    </div>
			</div>
			</div> 
			

		  </div>

		  <div class="row">

		  </div>

		</section>
		<!-- /.content -->
	  </div>
  </div>
  <!-- /.content-wrapper -->
  
   <footer class="main-footer">
   
	  &copy; 2025 All Rights Reserved Catchup.
  </footer>

  
  <!-- Add the sidebar's background. This div must be placed immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->
	
	<!-- ./side demo panel -->
	<div class="sticky-toolbar">	    
	    <a href="#" data-bs-toggle="tooltip" data-bs-placement="left" title="Buy Now" class="waves-effect waves-light btn btn-success btn-flat mb-5 btn-sm" target="_blank">
			<span class="icon-Money"><span class="path1"></span><span class="path2"></span></span>
		</a>
	    <a href="https://themeforest.net/user/multipurposethemes/portfolio" data-bs-toggle="tooltip" data-bs-placement="left" title="Portfolio" class="waves-effect waves-light btn btn-danger btn-flat mb-5 btn-sm" target="_blank">
			<span class="icon-Image"></span>
		</a>
	    <a id="chat-popup" href="#" data-bs-toggle="tooltip" data-bs-placement="left" title="Live Chat" class="waves-effect waves-light btn btn-warning btn-flat btn-sm">
			<span class="icon-Group-chat"><span class="path1"></span><span class="path2"></span></span>
		</a>
	</div>
	<!-- Sidebar -->
	
	
	
	<!-- Page Content overlay -->
	<script>
    const adminToken = localStorage.getItem("adminToken");
    const adminId = localStorage.getItem("adminId");
  
    if (!adminToken || !adminId) {
      window.location.href = "auth_login.html";
    }
  </script>
  
	

	<script>
        document.addEventListener("DOMContentLoaded", function () {
          const tableBody = document.querySelector("#liveCourseTable tbody");
          const loadMoreBtn = document.getElementById("loadMoreBtn");
          
          // Fetch and Populate Live Courses
          async function fetchLiveCourses() {
            try {
              const response = await fetch("https://catchup-project.onrender.com/api/livecourses/get");
              if (!response.ok) throw new Error("Failed to fetch courses");
      
              const courses = await response.json();
              tableBody.innerHTML = ""; // Clear existing rows
      
              courses.forEach(course => {
                const row = document.createElement("tr");
                row.innerHTML = `
                  <td>${course.title}</td>
                  <td>${course.instructor || "N/A"}</td>
                  <td>${course.category || "N/A"}</td>
                  <td>${course.subject || "N/A"}</td>
                  <td>${course.postedBy || "N/A"}</td>
                  <td>${course.date}</td>
                  <td>
                    <button class="btn btn-warning btn-sm update-btn" data-id="${course._id}">Update</button>
                    <button class="btn btn-danger btn-sm delete-btn" data-id="${course._id}">Delete</button>
                  </td>
                `;
                tableBody.appendChild(row);
              });
      
              attachEventListeners();
            } catch (error) {
              console.error("Error fetching courses:", error);
            }
          }
      
          // Handle Course Deletion
          async function deleteCourse(courseId) {
            if (!confirm("Are you sure you want to delete this course?")) return;
      
            try {
              const response = await fetch(`https://catchup-project.onrender.com/api/livecourses/delete/${courseId}`, {
                method: "DELETE"
              });
              if (!response.ok) throw new Error("Failed to delete course");
      
              alert("Course deleted successfully");
              fetchLiveCourses();
            } catch (error) {
              console.error("Error deleting course:", error);
            }
          }
      
          // Handle Course Update
          function updateCourse(courseId) {
            const newTitle = prompt("Enter new course title:");
            if (!newTitle) return;
      
            fetch(`https://catchup-project.onrender.com/api/livecourses/update/${courseId}`, {
              method: "PUT",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ title: newTitle })
            })
              .then(response => {
                if (!response.ok) throw new Error("Failed to update course");
                alert("Course updated successfully");
                fetchLiveCourses();
              })
              .catch(error => console.error("Error updating course:", error));
          }
      
          // Attach event listeners to buttons
          function attachEventListeners() {
            document.querySelectorAll(".delete-btn").forEach(button => {
              button.addEventListener("click", () => deleteCourse(button.dataset.id));
            });
      
            document.querySelectorAll(".update-btn").forEach(button => {
              button.addEventListener("click", () => updateCourse(button.dataset.id));
            });
          }
      
          // Load More (Optional - if pagination is needed)
          loadMoreBtn.addEventListener("click", fetchLiveCourses);
      
          // Initial Fetch
          fetchLiveCourses();
        });
      </script>



	<!-- Vendor JS -->
	<script src="js/vendors.min.js"></script>
	<script src="js/pages/chat-popup.js"></script>
    <script src="../assets/icons/feather-icons/feather.min.js"></script>	<script src="../assets/vendor_components/datatable/datatables.min.js"></script>
    <script src="../assets/vendor_components/tiny-editable/mindmup-editabletable.js"></script>
    <script src="../assets/vendor_components/tiny-editable/numeric-input-example.js"></script>
	
	<!-- CatchUp App -->
	<script src="js/template.js"></script>
	
	<script src="js/pages/data-table.js"></script>
	<script src="js/pages/editable-tables.js"></script>
	


    <script>
        document.addEventListener("DOMContentLoaded", function () {
          const tableBody = document.querySelector("#offlineCourseTable tbody");
          const loadMoreBtn = document.getElementById("loadMoreBtn");
          
          // Fetch and Populate Live Courses
          async function fetchLiveCourses() {
            try {
              const response = await fetch("https://catchup-project.onrender.com/api/livecourses/get");
              if (!response.ok) throw new Error("Failed to fetch courses");
      
              const courses = await response.json();
              tableBody.innerHTML = ""; // Clear existing rows
      
              courses.forEach(course => {
                const row = document.createElement("tr");
                row.innerHTML = `
                  <td>${course.title}</td>
                  <td>${course.instructor || "N/A"}</td>
                  <td>${course.category || "N/A"}</td>
                  <td>${course.subject || "N/A"}</td>
                  <td>${course.postedBy || "N/A"}</td>
                  <td>${course.date}</td>
                  <td>
                    <button class="btn btn-warning btn-sm update-btn" data-id="${course._id}">Update</button>
                    <button class="btn btn-danger btn-sm delete-btn" data-id="${course._id}">Delete</button>
                  </td>
                `;
                tableBody.appendChild(row);
              });
      
              attachEventListeners();
            } catch (error) {
              console.error("Error fetching courses:", error);
            }
          }
      
          // Handle Course Deletion
          async function deleteCourse(courseId) {
            if (!confirm("Are you sure you want to delete this course?")) return;
      
            try {
              const response = await fetch(`https://catchup-project.onrender.com/api/livecourses/delete/${courseId}`, {
                method: "DELETE"
              });
              if (!response.ok) throw new Error("Failed to delete course");
      
              alert("Course deleted successfully");
              fetchLiveCourses();
            } catch (error) {
              console.error("Error deleting course:", error);
            }
          }
      
          // Handle Course Update
          function updateCourse(courseId) {
            const newTitle = prompt("Enter new course title:");
            if (!newTitle) return;
      
            fetch(`https://catchup-project.onrender.com/api/livecourses/update/${courseId}`, {
              method: "PUT",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ title: newTitle })
            })
              .then(response => {
                if (!response.ok) throw new Error("Failed to update course");
                alert("Course updated successfully");
                fetchLiveCourses();
              })
              .catch(error => console.error("Error updating course:", error));
          }
      
          // Attach event listeners to buttons
          function attachEventListeners() {
            document.querySelectorAll(".delete-btn").forEach(button => {
              button.addEventListener("click", () => deleteCourse(button.dataset.id));
            });
      
            document.querySelectorAll(".update-btn").forEach(button => {
              button.addEventListener("click", () => updateCourse(button.dataset.id));
            });
          }
      
          // Load More (Optional - if pagination is needed)
          loadMoreBtn.addEventListener("click", fetchLiveCourses);
      
          // Initial Fetch
          fetchLiveCourses();
        });
      </script>
	
</body>
</html>
